# 时间相关的模块

## time 模块

常用方法

- `time.sleep(secs)`：(线程)推迟指定的时间运行。单位为秒。
- `time.time()`：获取当前时间戳。

在 Python 中，通常有这三种方式来表示时间：时间戳、结构化时间和格式化时间：

- 时间戳：通常来说，时间戳表示的是从1970年1月1日00:00:00开始按秒计算的偏移量。如 `1747114142.79492`
- 格式化时间：如 `1999-12-06`
- 结构化时间：如 `time.struct_time(tm_year=2025, tm_mon=5, tm_mday=13, tm_hour=13, tm_min=29, tm_sec=54, tm_wday=1, tm_yday=133, tm_isdst=0)`

```python
import time

# 时间戳
print(time.time())

# 格式化时间
print(time.strftime('%Y-%m-%d %X'))
print(time.strftime('%Y-%m-%d %H-%M-%S'))

# 结构化时间
print(time.localtime())
```

**格式化时间**

常见符号含义

| 符号 | 含义                                      |
| :--- | :---------------------------------------- |
| %y   | 两位数的年份表示（00-99）                 |
| %Y   | 四位数的年份表示（000-9999）              |
| %m   | 月份（01-12）                             |
| %d   | 月内中的一天（0-31）                      |
| %H   | 24小时制小时数（0-23）                    |
| %I   | 12小时制小时数（01-12）                   |
| %M   | 分钟数（00=59）                           |
| %S   | 秒（00-59）                               |
| %a   | 本地简化星期名称                          |
| %A   | 本地完整星期名称                          |
| %b   | 本地简化的月份名称                        |
| %B   | 本地完整的月份名称                        |
| %c   | 本地相应的日期表示和时间表示              |
| %j   | 年内的一天（001-366）                     |
| %p   | 本地A.M.或P.M.的等价符                    |
| %U   | 一年中的星期数（00-53）星期天为星期的开始 |
| %w   | 星期（0-6），星期天为星期的开始           |
| %W   | 一年中的星期数（00-53）星期一为星期的开始 |
| %x   | 本地相应的日期表示                        |
| %X   | 本地相应的时间表示                        |
| %Z   | 当前时区的名称                            |
| %%   | %号本身                                   |

**结构化时间**

常见索引、属性和值

| 索引 | 属性                      | 值                 |
| :--- | :------------------------ | :----------------- |
| 0    | tm_year（年）             | 比如2011           |
| 1    | tm_mon（月）              | 1月12日            |
| 2    | tm_mday（日）             | 1月31日            |
| 3    | tm_hour（时）             | 0 - 23             |
| 4    | tm_min（分）              | 0 - 59             |
| 5    | tm_sec（秒）              | 0 - 60             |
| 6    | tm_wday（weekday）        | 0 - 6（0表示周一） |
| 7    | tm_yday（一年中的第几天） | 1 - 366            |
| 8    | tm_isdst（是否是夏令时）  | 默认为0            |

**格式之间的转换**

![时间格式转化1](http://ncloud.eagleslab.com/Python/Python%E9%9D%A2%E5%90%91%E5%87%BD%E6%95%B0/%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E8%BD%AC%E5%8C%961.png)

```python
import time

#  时间戳 <---> 结构化时间
timestamp = time.time()
struct_time = time.localtime(timestamp)
new_timestamp = time.mktime(struct_time)

# 结构化时间 <---> 格式化时间
## struct_time -> format_time
ft = time.strftime("%Y/%m/%d %H:%M:%S", time.localtime(1550312090))
## format_time -> struct_time
st = time.strptime("2024/05/14 11:57:30", "%Y/%m/%d %H:%M:%S")
```

##  datatime 模块

某些情况下，我们需要写一个定时的任务，比如几分钟后，几分钟前，这种情况下，用 time 模块就不太好操作。这个时候我们需要 datatime 模块来完成这个操作。

# random 模块

用来生成随机数模块

# os 模块

操作系统交互接口

**工作路径相关**

| 方法                  | 含义                              |
| :-------------------- | :-------------------------------- |
| `os.getcwd()`         | 获取当前工作目录                  |
| `os.chdir("dirname")` | 改变当前脚本工作目录              |
| `os.curdir`           | 返回当前目录 `.`                  |
| `os.pardir`           | 获取当前目录的父目录字符串名 `..` |

**文件夹相关**

| 方法                                 | 含义                                                         |
| :----------------------------------- | :----------------------------------------------------------- |
| `os.makedirs("dirname1/dirname2")`   | 可生成多层递归目录                                           |
| `os.removedirs("dirname1/dirname2")` | 若目录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推 |
| `os.mkdir("dirname")`                | 生成单级目录                                                 |
| `os.rmdir("dirname")`                | 删除单级空目录，若目录不为空则无法删除，报错                 |
| `os.listdir("dirname")`              | 列出指定目录下的所有文件和子目录                             |

**文件相关**

| 方法                             | 含义              |
| :------------------------------- | :---------------- |
| `os.remove("path/to/filename")`  | 删除一个文件      |
| `os.rename("oldname","newname")` | 重命名文件/目录   |
| `os.stat('path/to/filename')`    | 获取文件/目录信息 |

**操作系统差异相关**

| 方法         | 含义                         |
| :----------- | :--------------------------- |
| `os.sep`     | 输出操作系统特定的路径分隔符 |
| `os.linesep` | 输出当前平台使用的行终止符   |
| `os.pathsep` | 输出用于分割文件路径的字符串 |
| `os.name`    | 输出字符串指示当前使用平台   |

**执行系统命令相关**

| 方法                       | 含义                       |
| :------------------------- | :------------------------- |
| `os.system(command)`       | 运行命令，直接输出执行结果 |
| `os.popen(command).read()` | 运行命令，获取执行结果     |
| `os.environ`               | 获取系统环境变量           |

**路径相关**

| 方法                                  | 含义                                                    |
| :------------------------------------ | :------------------------------------------------------ |
| `os.path.abspath(path)`               | 返回 path 规范化的绝对路径                              |
| `os.path.split(path)`                 | 将 path 分割成目录和文件名二元组返回                    |
| `os.path.dirname(path)`               | 返回 path 的目录                                        |
| `os.path.basename(path)`              | 返回 path 最后的文件名                                  |
| `os.path.exists(path)`                | 如果 path 存在，返回 True；如果 path 不存在，返回 False |
| `os.path.isabs(path)`                 | 如果 path 是绝对路径，返回 True                         |
| `os.path.isfile(path)`                | 如果 path 是一个存在的文件，返回 True。否则返回 False   |
| `os.path.isdir(path)`                 | 如果 path 是一个存在的目录，则返回 True。否则返回 False |
| `os.path.join(path1[, path2[, ...]])` | 将多个路径组合后返回，第一个绝对路径之前的参数将被忽略  |
| `os.path.getatime(path)`              | 返回 path 所指向的文件或者目录的最后访问时间            |
| `os.path.getmtime(path)`              | 返回 path 所指向的文件或者目录的最后修改时间            |
| `os.path.getsize(path)`               | 返回 path 的大小                                        |

**文件属相关**

| 属性     | 含义                                                         |
| :------- | :----------------------------------------------------------- |
| st_mode  | inode 保护模式                                               |
| st_ino   | inode 节点号                                                 |
| st_dev   | inode 驻留的设备                                             |
| st_nlink | inode 的链接数                                               |
| st_uid   | 所有者的用户ID                                               |
| st_gid   | 所有者的组ID                                                 |
| st_size  | 普通文件以字节为单位的大小；包含等待某些特殊文件的数据       |
| st_atime | 上次访问的时间                                               |
| st_mtime | 最后一次修改的时间                                           |
| st_ctime | 由操作系统报告的"ctime"。在某些系统上（如Unix）是最新的元数据更改的时间，在其它系统上（如Windows）是创建时间（详细信息参见平台的文档） |

# sys 模块

sys 模块是与 python 解释器交互的一个接口

| 方法           | 作用                                                     |
| :------------- | :------------------------------------------------------- |
| `sys.argv`     | 命令行参数 List，第一个元素是程序本身路径                |
| `sys.exit(n)`  | 退出程序，正常退出时 exit(0)，错误退出 sys.exit(1)       |
| `sys.version`  | 获取 Python 解释程序的版本信息                           |
| `sys.path`     | 返回模块的搜索路径，初始化时使用 PYTHONPATH 环境变量的值 |
| `sys.platform` | 返回操作系统平台名称                                     |

# re 模块

## 正则表达式

正则表达式（Regular Expression，简称Regex）是处理字符串的核心工具之一，它通过预定义的模式规则实现文本的快速检索、匹配和替换。在 Python 中，正则表达式通过内置的 re 模块实现，广泛应用于数据清洗、表单验证、日志分析等领域。

| 元字符                                                       | 匹配内容                                                     |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| \w                                                           | 匹配字母（包含中文）或数字或下划线                           |
| \W                                                           | 匹配非字母（包含中文）或数字或下划线                         |
| \s                                                           | 匹配任意的空白符                                             |
| \S                                                           | 匹配任意非空白符                                             |
| \d                                                           | 匹配数字                                                     |
| \D                                                           | 匹配非数字                                                   |
| \A                                                           | 匹配字符串的起始，严格匹配字符串的绝对开始                   |
| \Z                                                           | 匹配字符串的结尾，严格匹配字符串的绝对末尾                   |
| \n                                                           | 匹配一个换行符                                               |
| \t                                                           | 匹配一个制表符                                               |
| ^                                                            | 匹配字符串的起始，re.MULTILINE 匹配每一行的起始              |
| $                                                            | 匹配字符串的结尾，末尾或末尾的换行符前的位置，re.MULTILINE 匹配每一行的末尾 |
| .                                                            | 匹配任意字符，除了换行符，当 re.DOTALL 标记被指定时，则可以匹配包括换行符的任意字符 |
| [...]                                                        | 匹配字符组中的字符                                           |
| [...](http://ncloud.eagleslab.com/Python/Python面向函数/常用模块.html#fn_...) | 匹配除了字符组中的字符的所有字符                             |
| *                                                            | 匹配0个或者多个左边的字符。                                  |
| +                                                            | 匹配一个或者多个左边的字符。                                 |
| ？                                                           | 匹配0个或者1个左边的字符，非贪婪方式。                       |
| {n}                                                          | 精准匹配n个前面的表达式。                                    |
| {n,m}                                                        | 匹配n到m次由前面的正则表达式定义的片段，贪婪方式             |
| a                                                            | b                                                            |
| ()                                                           | 匹配括号内的表达式，也表示一个组                             |

#  shutil 模块

`shutil` 是 Python 的标准库之一，提供了许多高级文件操作，例如复制和移动文件，以及创建和提取压缩文件

可以理解为高级的文件、文件夹、压缩包处理模块